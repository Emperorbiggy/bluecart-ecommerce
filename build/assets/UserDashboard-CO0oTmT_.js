import{r as t,j as e,a as w,Y as k}from"./app-DsG4s4m7.js";import{u as C}from"./CartContext-cnNoAMSW.js";import{A as L}from"./AppLayout-BDlLyeFg.js";import{f as S,j as A}from"./api-Mjd8Mpow.js";import{B as O,X as _,M as z,S as P}from"./BlueCartLoader-BFcnrs0R.js";import{U as E}from"./user-Cmw1jrZ6.js";import{C as Y,L as B}from"./log-out-DPietjih.js";import{c as T}from"./createLucideIcon-d2gaGFPv.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],I=T("package-check",$);function M(){var h;const[d,u]=t.useState("profile"),[r,i]=t.useState(!1),[a,o]=t.useState(null),[g,y]=t.useState(!0),[n,f]=t.useState([]),[b,j]=t.useState(!0),{cart:x}=C(),N=[{key:"profile",label:"Profile",icon:e.jsx(E,{size:18})},{key:"cart",label:"Cart",icon:e.jsx(P,{size:18})},{key:"billing",label:"Billing Address",icon:e.jsx(Y,{size:18})},{key:"orders",label:"Orders",icon:e.jsx(I,{size:18})},{key:"logout",label:"Logout",icon:e.jsx(B,{size:18})}],m=async()=>{try{const s=localStorage.getItem("auth_token");await w.post("/api/logout",{},{headers:{Authorization:`Bearer ${s}`}}),localStorage.removeItem("auth_token"),window.location.href="/login"}catch(s){console.error("Logout failed",s)}};if(t.useEffect(()=>{(async()=>{try{const{user:c}=await S();o(c);const l=await A();f(l)}catch{o(null)}finally{y(!1),j(!1)}})()},[]),t.useEffect(()=>{document.body.style.overflow=r?"hidden":"auto"},[r]),g)return e.jsx(O,{});const v=()=>{switch(d){case"profile":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#130447]",children:"Your Profile"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{type:"text",value:(a==null?void 0:a.name)||"",disabled:!0,className:"w-full border rounded-md p-2 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",value:(a==null?void 0:a.email)||"",disabled:!0,className:"w-full border rounded-md p-2 bg-gray-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"email",value:(a==null?void 0:a.phone)||"",disabled:!0,className:"w-full border rounded-md p-2 bg-gray-100"})]})]})]});case"cart":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#130447]",children:"Your Cart"}),x.length===0?e.jsx("p",{className:"text-gray-500",children:"Your cart is empty."}):e.jsxs("div",{className:"space-y-4",children:[x.map(s=>e.jsxs("div",{className:"flex items-center border rounded-md p-4",children:[e.jsx("img",{src:Array.isArray(s.images)?s.images[0]:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("p",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-gray-500",children:["₦",Number(s.price).toLocaleString()," × ",s.quantity]})]})]},s.id)),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(k,{href:"/checkout",className:"bg-[#130447] text-white px-6 py-2 rounded-md hover:bg-[#0f0334]",children:"Proceed to Checkout"})})]})]});case"billing":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#130447]",children:"Billing Address"}),e.jsx("textarea",{value:(a==null?void 0:a.billing_address)||"",disabled:!0,className:"w-full border rounded-md p-3 bg-gray-100",rows:3})]});case"orders":return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#130447]",children:"Order History"}),b?e.jsx("p",{children:"Loading orders..."}):n.length===0?e.jsx("p",{className:"text-gray-500",children:"You have no past orders yet."}):e.jsx("div",{className:"space-y-6",children:n.map(s=>{var c;return e.jsxs("div",{className:"border rounded-lg shadow-sm p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-[#130447] mb-1",children:["Order #",s.order_id]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ₦",Number(s.total_price).toLocaleString()," | VAT: ₦",Number(s.vat).toLocaleString()]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsx("span",{className:`px-2 py-1 rounded-full ${s.payment_status==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.payment_status.toUpperCase()}),e.jsx("span",{className:"px-2 py-1 rounded-full bg-blue-100 text-blue-800",children:s.payment_method.toUpperCase()}),e.jsx("span",{className:`px-2 py-1 rounded-full ${s.status==="completed"?"bg-green-200 text-green-900":s.status==="processing"?"bg-yellow-200 text-yellow-900":"bg-red-100 text-red-800"}`,children:((c=s.status)==null?void 0:c.toUpperCase())||"PENDING"})]})]}),e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-700 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:"Product"}),e.jsx("th",{className:"py-2 pr-4",children:"Qty"}),e.jsx("th",{className:"py-2 pr-4",children:"Price"}),e.jsx("th",{className:"py-2",children:"Total"})]})}),e.jsx("tbody",{children:s.items.map(l=>{var p;return e.jsxs("tr",{className:"border-b text-gray-600",children:[e.jsx("td",{className:"py-2 pr-4",children:((p=l.product)==null?void 0:p.name)||"Product"}),e.jsx("td",{className:"py-2 pr-4",children:l.quantity}),e.jsxs("td",{className:"py-2 pr-4",children:["₦",Number(l.unit_price).toLocaleString()]}),e.jsxs("td",{className:"py-2",children:["₦",Number(l.total_price).toLocaleString()]})]},l.id)})})]})})]},s.id)})})]});case"logout":return m(),e.jsx("p",{className:"text-gray-600",children:"Logging out..."});default:return null}};return e.jsxs("div",{className:"relative bg-gray-50 min-h-screen",children:[r&&e.jsx("div",{onClick:()=>i(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden"}),e.jsxs("div",{className:"md:hidden flex justify-between items-center px-4 py-3 bg-white shadow sticky top-0 z-40",children:[e.jsx("button",{onClick:()=>i(!r),className:"text-[#130447]",children:r?e.jsx(_,{size:24}):e.jsx(z,{size:24})}),e.jsx("h2",{className:"text-lg font-bold text-[#130447]",children:"User Dashboard"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full max-w-5xl mx-auto bg-white rounded-lg shadow-md min-h-screen",children:[e.jsx("aside",{className:`
          bg-gray-100 border-r w-64 fixed md:static top-0 left-0 h-full z-40
          transform transition-transform duration-300 ease-in-out
          ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:block
        `,children:e.jsxs("div",{className:"p-4 pt-32 md:pt-4",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-[#130447] text-white rounded-full flex items-center justify-center text-xl font-bold mb-2",children:(h=a==null?void 0:a.name)==null?void 0:h.charAt(0)}),e.jsx("p",{className:"font-semibold text-center",children:a==null?void 0:a.name})]}),e.jsx("nav",{className:"space-y-2",children:N.map(s=>e.jsxs("button",{onClick:()=>{s.key==="logout"?m():u(s.key),i(!1)},className:`flex items-center gap-2 px-4 py-2 w-full text-sm font-medium rounded-md transition ${d===s.key?"bg-[#130447] text-white":"hover:bg-gray-200"}`,children:[s.icon,s.label]},s.key))})]})}),e.jsx("main",{className:"flex-1 p-6",children:v()})]})]})}M.layout=d=>e.jsx(L,{children:d});export{M as default};
