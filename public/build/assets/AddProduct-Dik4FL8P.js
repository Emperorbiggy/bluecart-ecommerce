import{r as u,j as e}from"./app-DI3dqHrO.js";import{A as k}from"./AdminLayout-DnhgpV5U.js";import{a as T}from"./api-DUNuWHcy.js";import"./BlueCartLoader-BslhaR6Q.js";import"./createLucideIcon-DchA5xRf.js";import"./log-out-CB4bZhgt.js";import"./user-DV8XVIFs.js";function R(){const[v,N]=u.useState("app-product"),[s,r]=u.useState({name:"",price:"",category:"",shortDescription:"",details:"",discount:"",images:[""],imageInputType:"url",uploadedImages:[null]}),[a,g]=u.useState(!1),[b,x]=u.useState(null),[h,f]=u.useState(null),m=parseFloat(s.price)||0,y=parseFloat(s.discount)||0,I=m-m*y/100,n=(t,o=null)=>{const{name:l,value:i,files:c}=t.target;if(l==="images"){const d=[...s.images];d[o]=i,r(p=>({...p,images:d}))}else if(l==="uploadedImages"){const d=[...s.uploadedImages];d[o]=c[0],r(p=>({...p,uploadedImages:d}))}else r(d=>({...d,[l]:i}))},w=()=>{r(t=>({...t,images:[...t.images,""],uploadedImages:[...t.uploadedImages,null]}))},j=t=>{const o=s.images.filter((i,c)=>c!==t),l=s.uploadedImages.filter((i,c)=>c!==t);r(i=>({...i,images:o,uploadedImages:l}))},C=async t=>{t.preventDefault(),g(!0),x(null),f(null);const o={...s,price:m,discount:y,images:s.imageInputType==="url"?s.images.filter(l=>l.trim()!==""):void 0,uploadedImages:s.imageInputType==="upload"?s.uploadedImages.filter(l=>l!==null):void 0};try{await T(o),f("Product added successfully!"),r({name:"",price:"",category:"",shortDescription:"",details:"",discount:"",images:[""],uploadedImages:[null],imageInputType:"url"})}catch(l){console.error(l),x("Failed to add product. Please try again.")}finally{g(!1)}};return e.jsx(k,{activeTab:v,setActiveTab:N,children:e.jsxs("div",{className:"w-full flex flex-col items-center mt-12 px-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-osunblue mb-6 text-center",children:"Add New Product"}),e.jsxs("form",{onSubmit:C,className:"max-w-3xl w-full mx-auto space-y-6 bg-white p-6 rounded shadow",children:[h&&e.jsx("div",{className:"p-2 mb-4 text-green-800 bg-green-100 rounded",children:h}),b&&e.jsx("div",{className:"p-2 mb-4 text-red-800 bg-red-100 rounded",children:b}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",htmlFor:"name",children:"Product Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:n,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",placeholder:"Enter product name",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",htmlFor:"price",children:"Price (₦)"}),e.jsx("input",{type:"number",name:"price",id:"price",min:"0",value:s.price,onChange:n,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",placeholder:"Enter price",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",htmlFor:"category",children:"Product Category"}),e.jsxs("select",{name:"category",id:"category",value:s.category,onChange:n,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",disabled:a,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a category"}),e.jsx("option",{value:"Branded",children:"Branded"}),e.jsx("option",{value:"Clothing",children:"Clothing"}),e.jsx("option",{value:"Gadgets",children:"Gadgets"}),e.jsx("option",{value:"Home Appliances",children:"Home Appliances"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",htmlFor:"discount",children:"Discount (%)"}),e.jsx("input",{type:"number",name:"discount",id:"discount",min:"0",max:"100",value:s.discount,onChange:n,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",placeholder:"Enter discount percentage",disabled:a}),s.discount&&e.jsxs("p",{className:"mt-1 text-green-700 font-semibold",children:["Discounted Price: ₦",I.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",htmlFor:"shortDescription",children:"Short Description"}),e.jsx("textarea",{name:"shortDescription",id:"shortDescription",value:s.shortDescription,onChange:n,rows:3,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",placeholder:"Brief description of the product",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",htmlFor:"details",children:"Details"}),e.jsx("textarea",{name:"details",id:"details",value:s.details,onChange:n,rows:5,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",placeholder:"Detailed description and specifications",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"Select Image Type"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"imageInputType",value:"url",checked:s.imageInputType==="url",onChange:n,disabled:a}),e.jsx("span",{children:"Image URL"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"imageInputType",value:"upload",checked:s.imageInputType==="upload",onChange:n,disabled:a}),e.jsx("span",{children:"Upload File"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1",children:["Product Images (",s.imageInputType==="url"?"URLs":"Upload Files",")"]}),s.imageInputType==="url"&&s.images.map((t,o)=>e.jsxs("div",{className:"flex items-center mb-2 space-x-2",children:[e.jsx("input",{type:"url",name:"images",value:t,onChange:l=>n(l,o),placeholder:"Image URL",className:"flex-grow border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-osunblue",disabled:a}),s.images.length>1&&e.jsx("button",{type:"button",onClick:()=>j(o),className:"text-red-500 hover:text-red-700 font-bold px-2",title:"Remove this image",disabled:a,children:"×"})]},o)),s.imageInputType==="upload"&&s.uploadedImages.map((t,o)=>e.jsxs("div",{className:"flex items-center mb-2 space-x-2",children:[e.jsx("input",{type:"file",name:"uploadedImages",accept:"image/*",onChange:l=>n(l,o),className:"flex-grow border border-gray-300 rounded px-3 py-2",disabled:a}),s.uploadedImages.length>1&&e.jsx("button",{type:"button",onClick:()=>j(o),className:"text-red-500 hover:text-red-700 font-bold px-2",title:"Remove this image",disabled:a,children:"×"})]},o)),e.jsx("button",{type:"button",onClick:w,className:"mt-2 px-3 py-1 bg-osunblue text-white rounded hover:bg-osunblue-dark transition",disabled:a,children:"Add More Images"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"bg-osunblue text-white px-6 py-2 rounded hover:bg-osunblue-dark transition disabled:opacity-50",disabled:a,children:a?"Adding...":"Add Product"})})]})]})})}export{R as default};
