import{r as l,q as f,j as e,Y as i,m as x}from"./app-DI3dqHrO.js";import{M as p,S as c,X as u,B as y}from"./BlueCartLoader-BslhaR6Q.js";import{c as d}from"./createLucideIcon-DchA5xRf.js";import{C as g,L as b}from"./log-out-CB4bZhgt.js";import{U as j}from"./user-DV8XVIFs.js";import{e as k}from"./api-DUNuWHcy.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],N=d("box",w);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],C=d("circle-plus",v);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],A=d("clipboard-list",M),L=[{key:"dashboard",label:"Dashboard",icon:c,href:"/admin/dashboard"},{key:"all-products",label:"All Products",icon:N,href:"/admin/products"},{key:"add-product",label:"Add Product",icon:C,href:"/admin/create/product"},{key:"orders",label:"Orders",icon:A,href:"/admin/orders"},{key:"payments",label:"Payments",icon:g,href:"/admin/payments"},{key:"profile",label:"Profile",icon:j,href:"/admin/profile"}];function _(){const[r,s]=l.useState(!1),{url:o}=f(),n=async()=>{try{const t=localStorage.getItem("auth_token");await axios.post("/api/logout",{},{headers:{Authorization:`Bearer ${t}`}}),localStorage.removeItem("auth_token"),window.location.href="/login"}catch(t){console.error("Logout failed",t)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 bg-white shadow z-30 flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:()=>s(!0),className:"text-gray-700",children:e.jsx(p,{className:"w-6 h-6"})}),e.jsxs(i,{href:"/",className:"flex items-center gap-2",children:[e.jsx(c,{className:"text-osunblue w-6 h-6"}),e.jsx("h1",{className:"text-lg font-bold text-osunblue",children:"BlueCart"})]}),e.jsx("div",{className:"w-6 h-6"})]}),e.jsxs("aside",{className:`w-64 bg-white z-40 shadow-md h-full fixed left-0 transform transition-transform duration-300 ease-in-out pt-[64px] md:pt-0 ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:fixed md:top-0 md:left-0 md:h-screen flex flex-col`,children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b",children:[e.jsxs(i,{href:"/",className:"flex items-center gap-2",children:[e.jsx(c,{className:"text-osunblue w-6 h-6"}),e.jsx("h1",{className:"text-xl font-bold text-osunblue",children:"BlueCart"})]}),e.jsx("button",{onClick:()=>s(!1),className:"md:hidden text-gray-700",children:e.jsx(u,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:L.map(({key:t,label:h,icon:a,href:m})=>e.jsxs(i,{href:m,className:`flex items-center gap-3 px-4 py-2 rounded-lg w-full text-left transition-all ${o.startsWith(m)?"bg-osunblue text-white":"hover:bg-gray-200 text-gray-700"}`,children:[e.jsx(a,{className:"w-5 h-5"}),h]},t))}),e.jsx("div",{className:"border-t px-4 py-4",children:e.jsxs("button",{onClick:n,className:"flex items-center gap-3 px-4 py-2 w-full text-left rounded-lg text-red-600 hover:bg-gray-100 transition-all",children:[e.jsx(b,{className:"w-5 h-5"}),"Logout"]})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-30 md:hidden",onClick:()=>s(!1)})]})}function E({children:r}){const[s,o]=l.useState(!0),[n,t]=l.useState(!1);return l.useEffect(()=>{(async()=>{try{const{is_admin:a}=await k();a?t(!0):x.visit("/dashboard")}catch(a){console.error("Error checking role:",a),x.visit("/login")}finally{o(!1)}})()},[]),s?e.jsx("div",{className:"h-screen flex items-center justify-center bg-white",children:e.jsx(y,{})}):n?e.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-100",children:[e.jsx(_,{}),e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden md:ml-64",children:e.jsx("main",{className:"flex-1 overflow-y-auto p-6 pt-1Final fixe0 md:p-8 md:pt-8",children:r})})]}):null}export{E as A,A as C};
