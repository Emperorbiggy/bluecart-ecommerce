import{r as t,j as e,a as h}from"./app-Cu4gI7ct.js";import{A as b}from"./AdminLayout-BJ1TDyrl.js";import{f as P}from"./api-C_pSPt-h.js";import"./BlueCartLoader-DIdU36Zx.js";import"./createLucideIcon-BfVtD7wb.js";import"./log-out-BuneZK1n.js";import"./user-BnYGxcdh.js";function F(){const[x,f]=t.useState("profile"),[r,u]=t.useState({name:"",email:"",phone:""}),[o,p]=t.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[n,l]=t.useState(!1);t.useEffect(()=>{(async()=>{try{const{user:a}=await P();u({name:a.name||"",email:a.email||"",phone:a.phone||""})}catch(a){console.error("Failed to load user:",a)}})()},[]);const i=s=>{u({...r,[s.target.name]:s.target.value})},c=s=>{p({...o,[s.target.name]:s.target.value})},g=async()=>{l(!0);try{const s=localStorage.getItem("auth_token"),a=await h.post("/api/update-profile",r,{headers:{Authorization:`Bearer ${s}`}});alert(a.data.message||"Profile updated successfully ✅")}catch(s){console.error(s),alert("Failed to update profile ")}finally{l(!1)}},w=async()=>{var s,a;if(o.newPassword!==o.confirmPassword){alert("New passwords do not match ");return}l(!0);try{const d=localStorage.getItem("auth_token"),m=await h.post("/api/change-password",{old_password:o.oldPassword,new_password:o.newPassword,new_password_confirmation:o.confirmPassword},{headers:{Authorization:`Bearer ${d}`}});alert(m.data.message||"Password changed successfully ✅"),p({oldPassword:"",newPassword:"",confirmPassword:""})}catch(d){if((a=(s=d.response)==null?void 0:s.data)!=null&&a.errors){const m=Object.values(d.response.data.errors)[0][0];alert(m)}else alert("Failed to change password ❌")}finally{l(!1)}};return e.jsx(b,{activeTab:x,setActiveTab:f,children:e.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-[#130447] mb-8",children:"Admin Profile"}),e.jsxs("div",{className:"bg-white p-6 rounded shadow mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#130447] mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Full Name"}),e.jsx("input",{name:"name",type:"text",value:r.name,onChange:i,className:"mt-1 w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-[#130447]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email Address"}),e.jsx("input",{name:"email",type:"email",value:r.email,onChange:i,className:"mt-1 w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-[#130447]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Phone Number"}),e.jsx("input",{name:"phone",type:"tel",value:r.phone,onChange:i,className:"mt-1 w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-[#130447]"})]})]}),e.jsx("button",{onClick:g,disabled:n,className:"mt-6 px-6 py-2 bg-[#130447] text-white rounded hover:bg-[#10033c] disabled:opacity-50",children:n?"Updating...":"Update Profile"})]}),e.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#130447] mb-4",children:"Change Password"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Old Password"}),e.jsx("input",{name:"oldPassword",type:"password",value:o.oldPassword,onChange:c,className:"mt-1 w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-[#130447]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"New Password"}),e.jsx("input",{name:"newPassword",type:"password",value:o.newPassword,onChange:c,className:"mt-1 w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-[#130447]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Confirm New Password"}),e.jsx("input",{name:"confirmPassword",type:"password",value:o.confirmPassword,onChange:c,className:"mt-1 w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-[#130447]"})]})]}),e.jsx("button",{onClick:w,disabled:n,className:"mt-6 px-6 py-2 bg-[#130447] text-white rounded hover:bg-[#10033c] disabled:opacity-50",children:n?"Changing...":"Change Password"})]})]})})}export{F as default};
