import{r as m,j as e,Y as g}from"./app-n_nw6UrQ.js";import{g as w}from"./api-Co-g22V1.js";import{u as b}from"./CartContext-jsggff6b.js";import{A as j}from"./AppLayout-fTshfJZa.js";import{F as v,C as y}from"./funnel-BJPLnyrO.js";import{S as N}from"./BlueCartLoader-BIi3-81H.js";import"./createLucideIcon-4RdolYnt.js";import"./user-Cs_QK2x3.js";function C({product:t}){var i;const{addToCart:l,removeFromCart:r,getQuantity:h}=b(),o=h(t.id),n=Array.isArray(t.images)?t.images[0]:t.image||"/placeholder.png";return e.jsxs("div",{className:"relative bg-white rounded-xl shadow hover:shadow-md transition overflow-hidden w-full group",children:[e.jsx("img",{src:n,alt:t.name,className:"w-full h-52 object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1 truncate",children:t.name}),e.jsxs("p",{className:"text-[#130447] font-bold text-sm",children:["₦",(i=t.price)==null?void 0:i.toLocaleString()]})]}),e.jsx("div",{className:"absolute inset-0 bg-[#130447]/80 opacity-0 group-hover:opacity-100 flex items-center justify-center transition duration-300",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 px-4",children:[o>0?e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("button",{onClick:()=>r(t.id),className:"bg-white/20 border border-white rounded px-3 py-1 hover:bg-red-500 hover:text-white",children:"−"}),e.jsx("span",{className:"font-bold",children:o}),e.jsx("button",{onClick:()=>l(t),className:"bg-white/20 border border-white rounded px-3 py-1 hover:bg-green-500 hover:text-white",children:"+"})]}):e.jsx("button",{onClick:()=>l(t),className:"text-white font-semibold bg-white/20 border border-white px-4 py-2 rounded hover:bg-[#130447]/30 text-sm",children:"Add to Cart"}),e.jsx(g,{href:`/products/${t.id}`,className:"text-white font-semibold bg-white/20 border border-white px-4 py-2 rounded hover:bg-[#130447]/30 text-center",children:"View Details"})]})})]})}function P(){const[t,l]=m.useState({}),[r,h]=m.useState("all"),[o,n]=m.useState(!1),{getTotalItems:i}=b();m.useEffect(()=>{(async()=>{try{const d=(await w()).reduce((c,u)=>{const x=u.category||"uncategorized";return c[x]||(c[x]=[]),c[x].push(u),c},{});l(d)}catch(a){console.error("Failed to fetch products:",a)}})()},[]);const p=[{label:"All Categories",value:"all"},...Object.keys(t).map(s=>({label:s.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),value:s}))],f=()=>r==="all"?Object.entries(t):[[r,t[r]||[]]];return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#130447]",children:"Our Products"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!o),className:"flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium hover:border-[#130447] focus:outline-none",children:[e.jsx(v,{className:"h-4 w-4 mr-2 text-[#130447]"}),"Filter",e.jsx(y,{className:"h-4 w-4 ml-1 text-gray-600"})]}),o&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:p.map(s=>e.jsx("div",{onClick:()=>{h(s.value),n(!1)},className:`px-4 py-2 cursor-pointer hover:bg-gray-100 text-sm text-gray-700 ${r===s.value?"font-semibold text-[#130447]":""}`,children:s.label},s.value))})]})]}),f().map(([s,a])=>e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-semibold capitalize text-gray-800 mb-6",children:s.replace(/_/g," ")}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(d=>e.jsx(C,{product:d},d.id))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(g,{href:`/category/${s}`,className:"inline-block px-5 py-2 rounded-full text-white bg-[#130447] hover:bg-[#100338] transition font-medium",children:"View More"})})]},s)),i()>0&&e.jsxs(g,{href:"/cart",className:"fixed bottom-6 right-6 z-50 bg-[#130447] text-white p-4 rounded-full shadow-lg flex items-center gap-2 hover:bg-[#100338]/90 transition",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold text-sm",children:[i()," item(s)"]})]})]})}P.layout=t=>e.jsx(j,{children:t});export{P as default};
