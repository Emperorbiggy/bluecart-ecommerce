import{r as d,j as e,Y as S}from"./app-D-X7fx2O.js";import{b as P,c as k,s as _,w as j}from"./api-D2vxKmiF.js";import{U as I}from"./user-f5a_q1P7.js";import{M as R}from"./mail-BMsE6HcC.js";import{L as w,E,a as z}from"./lock-CgLq-Zo2.js";import{P as A,M}from"./phone-TbIq6bAx.js";import"./createLucideIcon-D3Pqf_Df.js";function W(){const[o,m]=d.useState(1),[n,u]=d.useState(!1),[i,x]=d.useState(!1),y=()=>u(!n),[s,v]=d.useState({name:"",email:"",password:"",password_confirmation:"",phone:"",address:"",state:"",city:""}),a=c=>{v({...s,[c.target.name]:c.target.value})},N=async c=>{var h,f,g,b;if(c.preventDefault(),o===1){if(!s.name||!s.email||!s.password||!s.password_confirmation){alert("Please fill in all personal details.");return}if(s.password!==s.password_confirmation){alert("Passwords do not match.");return}m(2)}else try{x(!0);const t=await P.post(k.register,s),{access_token:r,user:p}=t.data;if(r){localStorage.setItem("auth_token",r),_(r);const C=(p==null?void 0:p.role)==="admin"?j.adminDashboard:j.dashboard;window.location.href=C}}catch(t){console.error("Registration failed:",t);const r=((f=(h=t==null?void 0:t.response)==null?void 0:h.data)==null?void 0:f.message)||((b=(g=t==null?void 0:t.response)==null?void 0:g.data)==null?void 0:b.error)||"Registration failed. Please try again.";alert(r)}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row font-sans relative",children:[e.jsx("div",{className:"hidden md:flex md:w-1/2 bg-cover bg-center relative",style:{backgroundImage:"url('https://plus.unsplash.com/premium_photo-1683121263622-664434494177?q=80&w=1976&auto=format&fit=crop')"},children:e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center text-center p-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-white text-4xl font-bold mb-4",children:"Welcome to BlueCart"}),e.jsx("p",{className:"text-white text-lg",children:"Shop the best deals at your fingertips!"})]})})}),e.jsx("div",{className:"md:hidden absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url('https://plus.unsplash.com/premium_photo-1683121263622-664434494177?q=80&w=1976&auto=format&fit=crop')"}}),e.jsx("div",{className:"md:hidden absolute inset-0 bg-black/60 z-0"}),e.jsxs("div",{className:"relative z-10 w-full md:w-1/2 flex flex-col justify-center items-center px-6 py-8 md:p-16 space-y-6",children:[e.jsxs("div",{className:"md:hidden text-center text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-1",children:"Welcome to BlueCart"}),e.jsx("p",{className:"text-sm",children:"Shop the best deals at your fingertips!"})]}),e.jsx("div",{className:"w-full max-w-md flex-1 flex items-center",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-md shadow-xl rounded-2xl w-full p-6 sm:p-8 border border-blue-100",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-osunblue mb-6 text-center",children:o===1?"Create Your Account":"Billing Information"}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[o===1&&e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:e.jsx(I,{}),name:"name",value:s.name,onChange:a,placeholder:"Full Name"}),e.jsx(l,{icon:e.jsx(R,{}),type:"email",name:"email",value:s.email,onChange:a,placeholder:"Email Address"}),e.jsx(l,{icon:e.jsx(w,{}),type:n?"text":"password",name:"password",value:s.password,onChange:a,placeholder:"Password",rightIcon:!0,toggle:y,showPassword:n}),e.jsx(l,{icon:e.jsx(w,{}),type:n?"text":"password",name:"password_confirmation",value:s.password_confirmation,onChange:a,placeholder:"Confirm Password"})]}),o===2&&e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:e.jsx(A,{}),type:"tel",name:"phone",value:s.phone,onChange:a,placeholder:"Phone Number"}),e.jsx(l,{icon:e.jsx(M,{}),name:"address",value:s.address,onChange:a,placeholder:"Address"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",name:"state",value:s.state,onChange:a,placeholder:"State",className:"w-1/2 px-4 py-3 rounded-lg border text-sm focus:ring-2 focus:ring-osunblue focus:outline-none"}),e.jsx("input",{type:"text",name:"city",value:s.city,onChange:a,placeholder:"City",className:"w-1/2 px-4 py-3 rounded-lg border text-sm focus:ring-2 focus:ring-osunblue focus:outline-none"})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-osunblue text-white py-3 rounded-lg hover:bg-osunblue-700 transition font-semibold",children:i?"Submitting...":o===1?"Next":"Register"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",e.jsx(S,{href:"/login",className:"text-osunblue hover:underline font-medium",children:"Sign in"})]})]})})]})]})}function l({icon:o,rightIcon:m,showPassword:n,toggle:u,...i}){return e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3.5 text-gray-400",children:o}),e.jsx("input",{...i,className:"w-full pl-10 pr-10 py-3 rounded-lg border text-sm focus:ring-2 focus:ring-osunblue focus:outline-none"}),m&&e.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 cursor-pointer",onClick:u,children:n?e.jsx(E,{size:20}):e.jsx(z,{size:20})})]})}export{W as default};
